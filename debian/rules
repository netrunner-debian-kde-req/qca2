#!/usr/bin/make -f

include /usr/share/pkg-kde-tools/qt-kde-team/2/debian-qt-kde.mk

CFLAGS += -fvisibility=hidden -fvisibility-inlines-hidden
CXXFLAGS += -fvisibility=hidden -fvisibility-inlines-hidden

dh += --buildsystem=qmake

override_dh_auto_configure:
	./configure --verbose --prefix=/usr --qtdir=/usr/share/qt4 --debug --no-separate-debug-info
	echo QMAKE_CFLAGS_DEBUG="$(CFLAGS) $(CPPFLAGS)" >> conf.pri
	echo QMAKE_CXXFLAGS_DEBUG="$(CXXFLAGS) $(CPPFLAGS)" >> conf.pri
	echo QMAKE_LDFLAGS_DEBUG="$(LDFLAGS)" >> conf.pri

override_dh_strip:
	$(overridden_command) --dbg-package=libqca2-dbg

override_dh_clean:
	$(overridden_command)
	rm -rf confapp_unix.pri conf.log conf.pri crypto.prf lib/
